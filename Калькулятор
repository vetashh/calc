!pip install num2words
from num2words import num2words

val = {'ноль': 0, 'один': 1, 'два': 2, 'три': 3, 'четыре': 4, 'пять': 5, 'шесть': 6, 'семь': 7, 'восемь': 8, 'девять': 9,
       'десять': 10, 'одиннадцать': 11, 'двенадцать': 12, 'тринадцать': 13, 'четырнадцать': 14, 'пятнадцать': 15,
       'шестнадцать': 16, 'семнадцать': 17, 'восемнадцать': 18, 'девятнадцать': 19, 'двадцать': 20, 'тридцать': 30,
       'сорок': 40, 'пятьдесят': 50, 'шестьдесят': 60, 'семьдесят': 70, 'восемЬдесят': 80, 'девяносто': 90, 'сто': 100}
# произвольное кол-во операций (3), диагностика ошибок (2)

print('Данный калькулятор поддерживает примеры, написанные в текстовом виде (\'<число> <операция> <число>\', где <число> - \n'
      'не отрицательное целое число меньшее 100, записанное словами, <арифмитическая операция> - одна из операций \n'
      '"плюс", "минус", "умножить"), и выдает результат в виде текстового представления числа, являющегося ответом. \n'
      'Пример calc("двадцать пять плюс тринадцать") -> "тридцать восемь"\n')

def calc():
    example = input('Введите пример: ')
    list_word = example.split(' ')
    list_res = []
    num = ind = 0
    while ind < len(list_word):
        if list_word[ind] == 'умножить':
            list_word[ind:ind+2] = ['умножить на']
        ind += 1
    if list_word[0] in ['плюс', 'минус', 'умножить на'] or list_word[-1] in ['плюс', 'минус', 'умножить на']:
        print('Нельзя начинать пример с операций или заканчивать ими, попробуйте заново\n')
        calc()
    for ind, word in enumerate(list_word):
        if word not in ['плюс', 'минус', 'умножить на']:
            if not ind:
                try:
                    num += val[word]
                except:
                    print('Проверьте написание чисел (в примере надо использовать целые числа от 0 до 100) и написаний операций\n(надо использовать только операции "плюс", "минус", "умножить на") и попробуйте заново\n')
                    calc()
            else:
                if list_word[ind-1] not in ['плюс', 'минус', 'умножить на']:
                    try:
                        val[word]
                        if len(str(val[list_word[ind-1]])) > len(str(val[word])) and word != 'ноль':
                            num += val[word]
                        else:
                            print(f'Проверьте написание числа {list_word[ind-1]} {word} и попробуйте заново\n')
                            calc()
                    except:
                        print('Проверьте написание чисел (в примере надо использовать целые числа от 0 до 100) и написаний операций\n(надо использовать только операции "плюс", "минус", "умножить на") и попробуйте заново\n')
                        calc()
                else:
                    try:
                        num += val[word]
                    except:
                        print('Проверьте написание чисел (в примере надо использовать целые числа от 0 до 100) и написаний операций \n(надо использовать только операции "плюс", "минус", "умножить на") и попробуйте заново\n')
                        calc()
        else:
            if list_word[ind-1] not in ['плюс', 'минус', 'умножить на'] and word in ['плюс', 'минус', 'умножить на'] or not ind:
                list_res.append(num)
            else:
                print('Нельзя ставить две операции вместе, попробуйте заново\n')
                calc()
            list_res.append(word)
            num = 0
    list_res.append(num)
    print(list_res)
    ind = 0
    while ind < len(list_res):
        if list_res[ind] == 'умножить на':
            list_res[ind-1:ind+2] = [list_res[ind-1] * list_res[ind+1]]
            continue
        ind += 1
    ind = 0
    while ind < len(list_res):
        if list_res[ind] == 'плюс':
          list_res[ind-1:ind+2] = [list_res[ind-1] + list_res[ind+1]]
          continue
        elif list_res[ind] == 'минус':
            list_res[ind-1:ind+2] = [list_res[ind-1] - list_res[ind+1]]
            continue
        ind += 1
    return num2words(list_res[0], lang='ru')
print(calc())

# плюс пять умножить на два
# пять плюс плюс пять
# пть плс пть
# пять плюс шсть
# пять плюс шесть умножить на семь минус пять
